!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(){d(this,a),this.canvas=$("#canvas")[0],this.ctx=this.canvas.getContext("2d"),this.grayscaleCanvas=$("#grayscale-canvas")[0],this.grayscaleCtx=this.grayscaleCanvas.getContext("2d"),this.xGradiantCanvas=$("#gradiant-canvas-x")[0],this.xGradiantCtx=this.xGradiantCanvas.getContext("2d"),this.yGradiantCanvas=$("#gradiant-canvas-y")[0],this.yGradiantCtx=this.yGradiantCanvas.getContext("2d")}return a.prototype.setImage=function(a){this.image=new Image,this.image.onload=this.initCanvas.bind(this),this.image.src=a},a.prototype.initCanvas=function(){$("#canvas").show(),this.canvas.width=this.image.width,this.canvas.height=this.image.height,this.ctx.drawImage(this.image,0,0),$("input#horizontal-size").val(this.image.width),$("input#vertical-size").val(this.image.height),this.convertGrayscale(),this.computeGradiant(),this.computeVerticalSeams();{var a=this.getSeam(),b=this.grayscaleCtx.getImageData(0,0,this.grayscaleCanvas.width,this.grayscaleCanvas.height);this.traceSeam(a,b)}this.grayscaleCtx.putImageData(b,0,0)},a.prototype.convertGrayscale=function(){this.grayscaleCtx.drawImage(this.image,0,0,this.image.width,this.image.height);var a=this.ctx.getImageData(0,0,this.image.width,this.image.height);this.grayscaleImage=new jsfeat.matrix_t(this.image.width,this.image.height,jsfeat.U8_t|jsfeat.C1_t),jsfeat.imgproc.grayscale(a.data,this.image.width,this.image.height,this.grayscaleImage);for(var b=new Uint32Array(a.data.buffer),c=255<<24,d=this.grayscaleImage.cols*this.grayscaleImage.rows,e=0;--d>=0;)e=this.grayscaleImage.data[d],b[d]=c|e<<16|e<<8|e;this.grayscaleCanvas.width=this.grayscaleImage.cols,this.grayscaleCanvas.height=this.grayscaleImage.rows,this.grayscaleCtx.putImageData(a,0,0)},a.prototype.computeGradiant=function(){this.xGradiantCanvas.width=this.grayscaleImage.cols,this.xGradiantCanvas.height=this.grayscaleImage.rows,this.xGradiantCtx.drawImage(this.image,0,0,this.image.width,this.image.height),this.yGradiantCanvas.width=this.grayscaleImage.cols,this.yGradiantCanvas.height=this.grayscaleImage.rows,this.yGradiantCtx.drawImage(this.image,0,0,this.image.width,this.image.height);var a=this.ctx.getImageData(0,0,this.image.width,this.image.height),b=this.ctx.getImageData(0,0,this.image.width,this.image.height);this.gradiantImage=new jsfeat.matrix_t(this.image.width,this.image.height,jsfeat.S32C2_t),jsfeat.imgproc.sobel_derivatives(this.grayscaleImage,this.gradiantImage);var c=new Uint32Array(a.data.buffer),d=new Uint32Array(b.data.buffer);this.UInt8XGradData=new jsfeat.matrix_t(this.image.width,this.image.height,jsfeat.U8_t|jsfeat.C1_t),this.UInt8YGradData=new jsfeat.matrix_t(this.image.width,this.image.height,jsfeat.U8_t|jsfeat.C1_t);for(var e=255<<24,f=this.gradiantImage.cols*this.gradiantImage.rows,g=0;--f>=0;)g=255&Math.abs(this.gradiantImage.data[f<<1]),this.UInt8XGradData[f]=g,c[f]=e|g<<16|g<<8|g,g=255&Math.abs(this.gradiantImage.data[(f<<1)+1]),this.UInt8YGradData[f]=g,d[f]=e|g<<16|g<<8|g;this.xGradiantCtx.putImageData(a,0,0),this.yGradiantCtx.putImageData(b,0,0)},a.prototype.computeVerticalSeams=function(){this.costMatrix=[],this.parentMatrix=[];for(var a=0;a<this.canvas.width;++a){this.costMatrix[a]=[],this.parentMatrix[a]=[];for(var b=0;b<this.canvas.height;++b)this.costMatrix[a][b]=255,this.parentMatrix[a][b]=null}for(var a=0;a<this.canvas.width;a++)for(var b=0;b<this.canvas.height;b++)this.costMatrix[a][b]=this.cost(a,b,"vertical")},a.prototype.cost=function b(a,c,d){if("vertical"===d)var e=this.UInt8YGradData;else if("horizontal"===d)var e=this.UInt8XGradData;var b=e[this.at(a,c)];if(0===c)return b;var f=this.getParents(a,c,e),g=f[0].cost;this.parentMatrix[a][c]=f[0];for(var h=0;h<f.length;h++){var i=f[h].cost;g>i&&(g=i,this.parentMatrix[a][c]=f[h])}return b+=g},a.prototype.at=function(a,b){return b*this.canvas.width+a},a.prototype.getParents=function(a,b,c){var d=[];return 0===b?d:(0===a?(d.push({x:a,y:b-1,cost:c[this.at(a,b-1)]}),d.push({x:a+1,y:b-1,cost:c[this.at(a+1,b-1)]})):a===this.canvas.width-1?(d.push({x:a-1,y:b-1,cost:c[this.at(a-1,b-1)]}),d.push({x:a,y:b-1,cost:c[this.at(a,b-1)]})):(d.push({x:a-1,y:b-1,cost:c[this.at(a-1,b-1)]}),d.push({x:a,y:b-1,cost:c[this.at(a,b-1)]}),d.push({x:a+1,y:b-1,cost:c[this.at(a+1,b-1)]})),d)},a.prototype.getSeam=function(){var a=this.canvas.height-1;console.log(a),console.log(this.costMatrix);for(var b=this.costMatrix[0][a],c=0,d=0;d<this.costMatrix.length;d++){var e=this.costMatrix[d][a];b>e&&(b=e,c=d)}for(var f=[],d=a;d>0;d--){f[d]=c;var g=this.parentMatrix[c][d];c=g.x}return f},a.prototype.traceSeam=function(a,b){for(var c=new Uint32Array(b.data.buffer),d=0;d<a.length;d++)c[this.at(a[d],d)]=-16776961;return b},a}();c["default"]=e,b.exports=c["default"]},{}],2:[function(a){"use strict";function b(a){return a&&a.__esModule?a:{"default":a}}var c=a("./carver.js"),d=b(c);$(document).ready(function(){function a(a){$(".current-content").slideUp(400,function(){$(".intro").hide(),c.setImage(a),$(".current-content").slideDown(600)}),console.log(a)}function b(b){var c=new FileReader;c.onload=function(b){a(b.target.result)},c.readAsDataURL(b.target.files[0])}var c=new d["default"];$("#ballon-link").on("click",function(){console.log("called"),a("./images/ballon.jpg")}),$("#tower-link").on("click",function(){a("./images/tower.jpg")}),$("#upload-link").on("click",function(a){a.preventDefault(),$("#upload").trigger("click")}),$("#upload").on("change",b),$("#tower-link").click(),$(".image-btns").on("click",function(a){$(".image-canvas").hide();var b=a.target.id;"original-btn"==b?$("#canvas").show():"grayscale-btn"==b?$("#grayscale-canvas").show():"gradiant-btn-x"==b?$("#gradiant-canvas-x").show():"gradiant-btn-y"==b&&$("#gradiant-canvas-y").show()})})},{"./carver.js":1}]},{},[2,1]);